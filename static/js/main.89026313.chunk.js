(this.webpackJsonpz3l=this.webpackJsonpz3l||[]).push([[0],{1017:function(e,t){},1032:function(e,t){},1114:function(e,t){},1148:function(e,t,n){},1176:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(125),a=n(69),s=n(20),i=(n(355),n(343)),o=(n(1146),n(14));var j=Object(i.a)((function(e){var t=e.signOut,n=e.user;return localStorage.setItem("userToken",n.signInUserSession.idToken.jwtToken),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("header",{className:"App-header",children:["hello welcome, ",n.username]}),Object(o.jsxs)("nav",{style:{borderBottom:"solid 1px",padding:"1rem 0"},children:[Object(o.jsx)(a.b,{to:"/trucks",children:"trucks"})," |"," ",Object(o.jsx)(a.b,{to:"/reservations",children:"reservations"})," |"," ",Object(o.jsx)("button",{onClick:t,children:"Sign out"})]}),Object(o.jsx)(s.a,{})]})})),u=n(6),l="https://l816j6tbjg.execute-api.us-east-2.amazonaws.com/serverless_lambda_stage";function d(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),i=s[0],j=s[1],d=Object(c.useState)(""),h=Object(u.a)(d,2),f=h[0],x=h[1];return Object(o.jsxs)("main",{style:{padding:"1rem 0"},children:[Object(o.jsxs)("form",{children:[Object(o.jsx)("div",{children:Object(o.jsxs)("label",{children:["pick up: ",Object(o.jsx)("input",{name:"start_dt",type:"datetime-local",value:i,onChange:function(e){return j(e.target.value)}})]})}),Object(o.jsx)("div",{children:Object(o.jsxs)("label",{children:["drop off: ",Object(o.jsx)("input",{name:"end_dt",type:"datetime-local",value:f,onChange:function(e){return x(e.target.value)}})]})}),Object(o.jsx)("button",{onClick:function(e){e.preventDefault();var t=new URLSearchParams({start_dt:new Date(i).toISOString(),end_dt:new Date(f).toISOString()}).toString();fetch("".concat(l,"/trucks?").concat(t)).then((function(e){return e.json()})).then((function(e){console.log(e.data),r(e.data||[])})).catch((function(e){console.error("Error:",e)}))},children:"See available trucks"})]}),Object(o.jsx)(b,{trucks:n,handleClick:function(e){var t=e.target.dataset.truckId,n=new URLSearchParams({truck_id:t,start_dt:new Date(i).toISOString(),end_dt:new Date(f).toISOString()}).toString();fetch("".concat(l,"/reservations?").concat(n),{method:"POST",headers:{Authorization:localStorage.getItem("userToken")}}).then((function(e){return e.json()})).then((function(e){console.log(e.data),alert(e.data),r([])})).catch((function(e){console.error("Error:",e)}))}}),Object(o.jsx)(O,{})]})}function b(e){var t=e.trucks,n=e.handleClick;return Object(o.jsx)("div",{children:t.length>0&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Trucks"}),t.map((function(e){var t=Object(u.a)(e,2),c=t[0],r=t[1];return Object(o.jsx)(h,{id:c,name:r,handleClick:n},c)}))]})})}function h(e){var t=e.id,n=e.name,c=e.handleClick;return Object(o.jsxs)("div",{className:"truck-info-container",style:{padding:"1rem 0"},children:[Object(o.jsx)("div",{children:t}),Object(o.jsx)("div",{children:n}),Object(o.jsx)("button",{"data-truck-id":t,onClick:c,children:"reserve this truck"})]})}function O(){var e=Object(s.g)();return Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:function(){return e("/reservations")},style:{margin:"1rem 0"},children:"See my reservations"})})}function f(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){fetch("".concat(l,"/reservations"),{headers:{Authorization:localStorage.getItem("userToken")}}).then((function(e){return e.json()})).then((function(e){console.log(e.data),r(e.data)})).catch((function(e){console.error("Error:",e)}))}),[]),Object(o.jsxs)("main",{style:{padding:"1rem 0"},children:[Object(o.jsx)("h2",{children:"My Reservations"}),n&&n.map((function(e){var t=Object(u.a)(e,4),n=t[0],c=t[1],r=t[2],a=t[3];return Object(o.jsx)(x,{startDt:n,endDt:c,truckName:r},"".concat(a,"-").concat(n))})),Object(o.jsx)(m,{})]})}function x(e){var t=e.startDt,n=e.endDt,c=e.truckName;return Object(o.jsxs)("div",{className:"reservation-item-container",style:{padding:"1rem 0"},children:[Object(o.jsx)("div",{children:c}),Object(o.jsx)("div",{children:new Date(t).toLocaleString()}),Object(o.jsx)("div",{children:new Date(n).toLocaleString()})]})}function m(){var e=Object(s.g)();return Object(o.jsx)("button",{onClick:function(){return e("/trucks")},children:"Find a truck"})}n(1148);n(53).default.configure({Auth:{userPoolId:"us-east-2_OfO9zaVMY",region:"us-east-2",userPoolWebClientId:"28427m4ef9sv96kd3gatpdhsmo"}});var v=document.getElementById("root");Object(r.render)(Object(o.jsx)(a.a,{children:Object(o.jsx)(s.d,{children:Object(o.jsxs)(s.b,{path:"/",element:Object(o.jsx)(j,{}),children:[Object(o.jsx)(s.b,{path:"/trucks",element:Object(o.jsx)(d,{})}),Object(o.jsx)(s.b,{path:"/reservations",element:Object(o.jsx)(f,{})}),Object(o.jsx)(s.b,{path:"*",element:Object(o.jsx)("main",{style:{padding:"1rem"},children:Object(o.jsx)("p",{})})})]})})}),v)},171:function(e,t){},172:function(e,t){},302:function(e,t){},308:function(e,t){},355:function(e,t,n){},442:function(e,t){},516:function(e,t){}},[[1176,1,2]]]);
//# sourceMappingURL=main.89026313.chunk.js.map