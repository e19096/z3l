(this.webpackJsonpz3l=this.webpackJsonpz3l||[]).push([[0],{1022:function(t,e){},1037:function(t,e){},1118:function(t,e){},1152:function(t,e,n){},1180:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(125),s=n(69),i=n(20),o=(n(360),n(346)),d=(n(1150),n(14));function j(){return Object(d.jsxs)(o.a,{loginMechanisms:["email"],children:[function(t){var e=t.signOut,n=t.user;return Object(d.jsxs)("main",{children:[Object(d.jsxs)("h1",{children:["Hello ",n.username]}),Object(d.jsx)("button",{onClick:e,children:"Sign out"})]})},Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App-header",children:"hello welcome"}),Object(d.jsxs)("nav",{style:{borderBottom:"solid 1px",padding:"1rem 0"},children:[Object(d.jsx)(s.b,{to:"/trucks",children:"trucks"})," |"," ",Object(d.jsx)(s.b,{to:"/reservations",children:"reservations"})]}),Object(d.jsx)(i.a,{})]})]})}var u=n(6),l=n(24),h=n(341),b=n(342),O=n(349),f=n(348),m="https://l816j6tbjg.execute-api.us-east-2.amazonaws.com/serverless_lambda_stage";function v(t){var e=t.id,n=t.name,c=t.handleClick;return Object(d.jsxs)("div",{className:"truck-info-container",style:{padding:"1rem 0"},children:[Object(d.jsx)("div",{children:e}),Object(d.jsx)("div",{children:n}),Object(d.jsx)("button",{"data-truck-id":e,onClick:c,children:"reserve this truck"})]})}function x(){var t=Object(i.g)();return Object(d.jsx)("button",{onClick:function(){return t("/reservations")},style:{margin:"1rem 0"},children:"See my reservations"})}var g=function(t){Object(O.a)(n,t);var e=Object(f.a)(n);function n(t){var c;return Object(h.a)(this,n),(c=e.call(this,t)).fetchTrucks=function(){var t=c.state,e=t.start_dt_iso,n=t.end_dt_iso,r=new URLSearchParams({start_dt:e,end_dt:n}).toString();fetch("".concat(m,"/trucks?").concat(r)).then((function(t){return t.json()})).then((function(t){console.log(t.data),c.setState({trucks:t.data||[]})})).catch((function(t){console.error("Error:",t)}))},c.handleChange=function(t){var e,n=new Date(t.target.value).toISOString();c.setState((e={},Object(l.a)(e,t.target.name,t.target.value),Object(l.a)(e,"".concat(t.target.name,"_iso"),n),e))},c.reserveTruck=function(t){var e=t.target.dataset.truckId,n=c.state,r=n.start_dt_iso,a=n.end_dt_iso,s=new URLSearchParams({truck_id:e,start_dt:r,end_dt:a}).toString();fetch("".concat(m,"/reservations?").concat(s),{method:"POST",headers:{Authorization:localStorage.getItem("user")}}).then((function(t){return t.json()})).then((function(t){console.log(t.data),alert(t.data),c.setState({trucks:[]})})).catch((function(t){console.error("Error:",t)}))},c.state={start_dt:"",end_dt:"",start_dt_iso:"",end_dt_iso:"",trucks:[]},c}return Object(b.a)(n,[{key:"render",value:function(){var t=this;return Object(d.jsxs)("main",{style:{padding:"1rem 0"},children:[Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:["pick up: ",Object(d.jsx)("input",{name:"start_dt",type:"datetime-local",value:this.state.start_dt,onChange:this.handleChange})]})}),Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:["drop off: ",Object(d.jsx)("input",{name:"end_dt",type:"datetime-local",value:this.state.end_dt,onChange:this.handleChange})]})}),Object(d.jsx)("button",{onClick:this.fetchTrucks,children:"See available trucks"}),this.state.trucks.length>0&&Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Trucks"}),this.state.trucks.map((function(e){var n=Object(u.a)(e,2),c=n[0],r=n[1];return Object(d.jsx)(v,{id:c,name:r,handleClick:t.reserveTruck},c)}))]}),Object(d.jsx)("div",{children:Object(d.jsx)(x,{})})]})}}]),n}(r.a.Component);function k(){var t=Object(c.useState)([]),e=Object(u.a)(t,2),n=e[0],r=e[1];return Object(c.useEffect)((function(){fetch("".concat(m,"/reservations"),{headers:{Authorization:localStorage.getItem("user")}}).then((function(t){return t.json()})).then((function(t){console.log(t.data),r(t.data)})).catch((function(t){console.error("Error:",t)}))}),[]),Object(d.jsxs)("main",{style:{padding:"1rem 0"},children:[Object(d.jsx)("h2",{children:"My Reservations"}),n&&n.map((function(t){var e=Object(u.a)(t,4),n=e[0],c=e[1],r=e[2],a=e[3];return Object(d.jsx)(p,{startDt:n,endDt:c,truckName:r},"".concat(a,"-").concat(n))})),Object(d.jsx)(_,{})]})}function p(t){var e=t.startDt,n=t.endDt,c=t.truckName;return Object(d.jsxs)("div",{className:"reservation-item-container",style:{padding:"1rem 0"},children:[Object(d.jsx)("div",{children:c}),Object(d.jsx)("div",{children:new Date(e).toLocaleString()}),Object(d.jsx)("div",{children:new Date(n).toLocaleString()})]})}function _(){var t=Object(i.g)();return Object(d.jsx)("button",{onClick:function(){return t("/trucks")},children:"Find a truck"})}n(1152);n(43).default.configure({Auth:{userPoolId:"us-east-2_OfO9zaVMY",region:"us-east-2",userPoolWebClientId:"28427m4ef9sv96kd3gatpdhsmo"}});var S=document.getElementById("root");Object(a.render)(Object(d.jsx)(s.a,{children:Object(d.jsx)(i.d,{children:Object(d.jsxs)(i.b,{path:"/",element:Object(d.jsx)(j,{}),children:[Object(d.jsx)(i.b,{path:"trucks",element:Object(d.jsx)(g,{})}),Object(d.jsx)(i.b,{path:"reservations",element:Object(d.jsx)(k,{})}),Object(d.jsx)(i.b,{path:"*",element:Object(d.jsx)("main",{style:{padding:"1rem"},children:Object(d.jsx)("p",{children:"nothing here!"})})})]})})}),S)},171:function(t,e){},172:function(t,e){},303:function(t,e){},309:function(t,e){},360:function(t,e,n){},447:function(t,e){},521:function(t,e){}},[[1180,1,2]]]);
//# sourceMappingURL=main.2533fc42.chunk.js.map