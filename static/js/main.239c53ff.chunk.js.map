{"version":3,"sources":["App.js","constants.js","routes/trucks.js","routes/reservations.js","index.js"],"names":["withAuthenticator","signOut","user","localStorage","setItem","signInUserSession","idToken","jwtToken","className","username","style","borderBottom","padding","to","state","userToken","onClick","BASE_URL","Trucks","useState","trucks","setTrucks","startDt","setStartDt","endDt","setEndDt","name","type","value","onChange","e","target","preventDefault","query_params","URLSearchParams","start_dt","Date","toISOString","end_dt","toString","fetch","then","resp","json","data","console","log","catch","error","TruckList","handleClick","truckId","dataset","truck_id","method","headers","Authorization","getItem","alert","ReservationsButton","length","map","id","TruckItem","navigate","useNavigate","margin","Reservations","reservations","setReservations","useEffect","truckName","ReservationItem","TrucksButton","toLocaleString","Amplify","configure","Auth","userPoolId","region","userPoolWebClientId","rootElement","document","getElementById","render","path","element"],"mappings":"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","file":"static/js/main.239c53ff.chunk.js","sourcesContent":["import './App.css';\nimport { Outlet, Link } from \"react-router-dom\";\nimport { withAuthenticator } from '@aws-amplify/ui-react';\nimport '@aws-amplify/ui-react/styles.css';\n\nfunction App({ signOut, user }) {\n  localStorage.setItem('userToken', user.signInUserSession.idToken.jwtToken);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n      hello welcome, {user.username}\n      </header>\n      <nav\n        style={{\n          borderBottom: \"solid 1px\",\n          padding: \"1rem 0\"\n        }}\n      >\n        <Link to=\"/trucks\" state={{ userToken: user.signInUserSession.idToken.jwtToken }}>\n          trucks\n        </Link> |{\" \"}\n        <Link to=\"/reservations\" state={{ userToken: user.signInUserSession.idToken.jwtToken }}>\n          reservations\n        </Link> |{\" \"}\n        <button onClick={signOut}>Sign out</button>\n      </nav>\n      <Outlet />\n    </div>\n  )\n\n//   return (\n//     <Authenticator loginMechanisms={['email']}>\n//       {({ signOut, user }) => (\n//         <main>\n//           <h1>Hello {user.username}</h1>\n//           <button onClick={signOut}>Sign out</button>\n//         </main>\n//       )}\n//       <div className=\"App\">\n//         <header className=\"App-header\">\n//           hello welcome\n//         </header>\n//         <nav\n//           style={{\n//             borderBottom: \"solid 1px\",\n//             padding: \"1rem 0\"\n//           }}\n//         >\n//           <Link to=\"/trucks\">trucks</Link> |{\" \"}\n//           <Link to=\"/reservations\">reservations</Link>\n//         </nav>\n//         <Outlet />\n//       </div>\n//     </Authenticator>\n//   );\n}\n\nexport default withAuthenticator(App);\n","export const BASE_URL = \"https://l816j6tbjg.execute-api.us-east-2.amazonaws.com/serverless_lambda_stage\"\n","import React from 'react';\nimport { useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { BASE_URL } from '../constants';\n\nexport default function Trucks() {\n  const [trucks, setTrucks] = useState([]);\n  const [startDt, setStartDt] = useState('');\n  const [endDt, setEndDt] = useState('');\n\n  const fetchTrucks = (e) => {\n    e.preventDefault();\n    const query_params = new URLSearchParams({\n      start_dt: new Date(startDt).toISOString(),\n      end_dt: new Date(endDt).toISOString(),\n    }).toString()\n\n    fetch(`${BASE_URL}/trucks?${query_params}`)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data.data);\n        setTrucks(data.data || []); // TODO collapse by truck name\n      })\n      .catch((error) => {\n        console.error('Error:', error); // TODO\n      });\n  };\n\n  const reserveTruck = (e) => {\n    const truckId = e.target.dataset.truckId;\n    const query_params = new URLSearchParams({\n      truck_id: truckId,\n      start_dt: new Date(startDt).toISOString(),\n      end_dt: new Date(endDt).toISOString(),\n    }).toString()\n\n    fetch(`${BASE_URL}/reservations?${query_params}`, {\n      method: 'POST',\n      headers: {\n        Authorization: localStorage.getItem('userToken'),\n      },\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data.data);\n        alert(data.data);\n        setTrucks([]);\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  };\n\n  return (\n    <main style={{ padding: \"1rem 0\" }}>\n      <form>\n        <div>\n          <label>\n            pick up: <input\n              name=\"start_dt\"\n              type=\"datetime-local\"\n              value={startDt}\n              onChange={(e) => setStartDt(e.target.value)}\n            />\n          </label>\n        </div>\n        <div>\n          <label>\n            drop off: <input\n              name=\"end_dt\"\n              type=\"datetime-local\"\n              value={endDt}\n              onChange={(e) => setEndDt(e.target.value)}\n            />\n          </label>\n        </div>\n        <button onClick={fetchTrucks}>See available trucks</button>\n      </form>\n      <TruckList trucks={trucks} handleClick={reserveTruck} />\n      <ReservationsButton />\n    </main>\n  );\n}\n\nfunction TruckList({ trucks, handleClick }) {\n  return (\n    <div>\n      {trucks.length > 0 && (\n        <>\n          <h2>Trucks</h2>\n          {trucks.map(\n            ([id, name]) => (<TruckItem key={id} id={id} name={name} handleClick={handleClick} />)\n          )}\n        </ >\n      )}\n    </div>\n  );\n}\n\nfunction TruckItem({ id, name, handleClick }) {\n  return (\n    <div className=\"truck-info-container\" style={{ padding: \"1rem 0\" }}>\n      <div>{id}</div>\n      <div>{name}</div>\n      <button data-truck-id={id} onClick={handleClick}>reserve this truck</button>\n    </div>\n  );\n}\n\nfunction ReservationsButton() {\n  let navigate = useNavigate();\n\n  return (\n    <div>\n      <button onClick={() => navigate(\"/reservations\")} style={{ margin: \"1rem 0\" }}>\n        See my reservations\n      </button>\n    </div>\n  );\n}\n\n// TODO redux/middleware\n// TODO error handling/user friendly msging/loading, empty states\n// TODO validate params before calling api\n","import { useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { BASE_URL } from '../constants';\n\nexport default function Reservations() {\n  const [reservations, setReservations] = useState([]);\n\n  useEffect(() => {\n    fetch(`${BASE_URL}/reservations`, {\n      headers: {\n        Authorization: localStorage.getItem('userToken'),\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        // TODO catch 401 here\n        console.log(data.data);\n        setReservations(data.data);\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      }); // TODO\n  }, [])\n\n  return (\n    <main style={{ padding: \"1rem 0\" }}>\n      <h2>My Reservations</h2>\n      {reservations && reservations.map(\n        ([startDt, endDt, truckName, truckId]) => (\n          <ReservationItem\n            key={`${truckId}-${startDt}`}\n            startDt={startDt}\n            endDt={endDt}\n            truckName={truckName}\n          />\n        )\n      )}\n      <TrucksButton />\n    </main>\n  );\n}\n\nfunction ReservationItem({ startDt, endDt, truckName }) {\n  return (\n    <div className=\"reservation-item-container\" style={{ padding: \"1rem 0\" }}>\n      <div>{truckName}</div>\n      <div>{new Date(startDt).toLocaleString()}</div>\n      <div>{new Date(endDt).toLocaleString()}</div>\n    </div>\n  );\n}\n\nfunction TrucksButton() {\n  let navigate = useNavigate();\n\n  return (\n    <button onClick={() => navigate(\"/trucks\")}>\n      Find a truck\n    </button>\n  );\n}\n","import React from 'react';\nimport { render } from \"react-dom\";\nimport {\n  BrowserRouter,\n  Routes,\n  Route\n} from \"react-router-dom\";\nimport App from './App';\n// import Login from \"./routes/login\";\nimport Trucks from \"./routes/trucks\";\nimport Reservations from \"./routes/reservations\";\nimport './index.css';\n\nimport Amplify from 'aws-amplify';\nAmplify.configure({\n  Auth: {\n    userPoolId: 'us-east-2_OfO9zaVMY', //UserPool ID\n    region: 'us-east-2',\n    userPoolWebClientId: '28427m4ef9sv96kd3gatpdhsmo', //WebClientId\n  }\n});\n\nconst rootElement = document.getElementById(\"root\");\nrender(\n  <BrowserRouter>\n    <Routes>\n      <Route path=\"/\" element={<App />}>\n        <Route path=\"/trucks\" element={<Trucks />} />\n        <Route path=\"/reservations\" element={<Reservations />} />\n        <Route\n          path=\"*\"\n          element={\n            <main style={{ padding: \"1rem\" }}>\n              <p></p>\n            </main>\n          }\n        />\n      </Route>\n    </Routes>\n  </BrowserRouter>,\n  rootElement\n);\n"],"sourceRoot":""}