{"version":3,"sources":["App.js","constants.js","routes/trucks.js","routes/reservations.js","index.js"],"names":["App","loginMechanisms","signOut","user","username","onClick","className","style","borderBottom","padding","to","BASE_URL","Truck","id","name","handleClick","ReservationsButton","navigate","useNavigate","margin","Trucks","props","fetchTrucks","state","start_dt_iso","end_dt_iso","query_params","URLSearchParams","start_dt","end_dt","toString","fetch","then","resp","json","data","console","log","setState","trucks","catch","error","handleChange","e","dt_iso","Date","target","value","toISOString","reserveTruck","truckId","dataset","truck_id","method","headers","Authorization","localStorage","getItem","alert","type","this","onChange","length","map","React","Component","Reservations","useState","reservations","setReservations","useEffect","startDt","endDt","truckName","ReservationItem","TrucksButton","toLocaleString","Amplify","configure","Auth","userPoolId","region","userPoolWebClientId","rootElement","document","getElementById","render","path","element"],"mappings":"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","file":"static/js/main.2533fc42.chunk.js","sourcesContent":["import './App.css';\nimport { Outlet, Link } from \"react-router-dom\";\nimport { Auth } from 'aws-amplify';\nimport { Authenticator, withAuthenticator } from '@aws-amplify/ui-react';\nimport '@aws-amplify/ui-react/styles.css';\n\nexport default function App() {\n  // const getCreds = async () => {\n  //   var data = await Auth.currentSession();\n  //   debugger\n  //   localStorage.setItem('user', data.idToken.jwtToken);\n  // }\n  //\n  // getCreds()\n\n  return (\n    <Authenticator loginMechanisms={['email']}>\n      {({ signOut, user }) => (\n        <main>\n          <h1>Hello {user.username}</h1>\n          <button onClick={signOut}>Sign out</button>\n        </main>\n      )}\n      <div className=\"App\">\n        <header className=\"App-header\">\n          hello welcome\n        </header>\n        <nav\n          style={{\n            borderBottom: \"solid 1px\",\n            padding: \"1rem 0\"\n          }}\n        >\n          <Link to=\"/trucks\">trucks</Link> |{\" \"}\n          <Link to=\"/reservations\">reservations</Link>\n        </nav>\n        <Outlet />\n      </div>\n    </Authenticator>\n  );\n}\n\n// export default withAuthenticator(App);\n\n// export default function App() {\n//   return (\n//     <Authenticator loginMechanisms={['email']}>\n//       {({ signOut, user }) => (\n//         <main>\n//           <h1>Hello {user.username}</h1>\n//           <button onClick={signOut}>Sign out</button>\n//         </main>\n//       )}\n//     </Authenticator>\n//   );\n// }\n","export const BASE_URL = \"https://l816j6tbjg.execute-api.us-east-2.amazonaws.com/serverless_lambda_stage\"\n","import React from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { Auth } from 'aws-amplify';\nimport { BASE_URL } from '../constants';\n\nclass Trucks extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      start_dt: '',\n      end_dt: '',\n      start_dt_iso: '',\n      end_dt_iso: '',\n      trucks: [],\n    };\n  }\n\n  fetchTrucks = () => {\n    const { start_dt_iso, end_dt_iso } = this.state;\n    const query_params = new URLSearchParams({\n      start_dt: start_dt_iso,\n      end_dt: end_dt_iso,\n    }).toString()\n\n    fetch(`${BASE_URL}/trucks?${query_params}`)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data.data);\n        this.setState({ trucks: data.data || [] }); // TODO collapse by truck name\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  }\n\n  handleChange = (e) => {\n    const dt_iso = new Date(e.target.value).toISOString();\n    this.setState({\n      [e.target.name]: e.target.value,\n      [`${e.target.name}_iso`]: dt_iso,\n    });\n  }\n\n  reserveTruck = (e) => {\n    const truckId = e.target.dataset.truckId;\n    const { start_dt_iso, end_dt_iso } = this.state;\n    const query_params = new URLSearchParams({\n      truck_id: truckId,\n      start_dt: start_dt_iso,\n      end_dt: end_dt_iso,\n    }).toString()\n\n    fetch(`${BASE_URL}/reservations?${query_params}`, {\n      method: 'POST',\n      headers: {\n        Authorization: localStorage.getItem('user'),\n      },\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data.data);\n        alert(data.data);\n        this.setState({ trucks: [] });\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  }\n\n  render() {\n    return (\n      <main style={{ padding: \"1rem 0\" }}>\n        <div>\n          <label>\n            pick up: <input\n              name=\"start_dt\"\n              type=\"datetime-local\"\n              value={this.state.start_dt}\n              onChange={this.handleChange}\n            />\n          </label>\n        </div>\n        <div>\n          <label>\n            drop off: <input\n              name=\"end_dt\"\n              type=\"datetime-local\"\n              value={this.state.end_dt}\n              onChange={this.handleChange}\n            />\n          </label>\n        </div>\n        <button onClick={this.fetchTrucks}>See available trucks</button>\n        {this.state.trucks.length > 0 && (\n          <div>\n            <h2>Trucks</h2>\n            {this.state.trucks.map(\n              ([id, name]) => (<Truck key={id} id={id} name={name} handleClick={this.reserveTruck} />)\n            )}\n          </div>\n        )}\n        <div>\n          <ReservationsButton />\n        </div>\n      </main>\n    );\n  }\n}\n\nfunction Truck({ id, name, handleClick }) {\n  return (\n    <div className=\"truck-info-container\" style={{ padding: \"1rem 0\" }}>\n      <div>{id}</div>\n      <div>{name}</div>\n      <button data-truck-id={id} onClick={handleClick}>reserve this truck</button>\n    </div>\n  );\n}\n\nfunction ReservationsButton() {\n  let navigate = useNavigate();\n\n  return (\n    <button onClick={() => navigate(\"/reservations\")} style={{ margin: \"1rem 0\" }}>\n      See my reservations\n    </button>\n  );\n}\n\nexport default Trucks;\n\n// TODO redux/middleware\n// TODO error handling/user friendly msging/loading, empty states\n// TODO validate params before calling api\n","import { useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { Auth } from 'aws-amplify';\nimport { BASE_URL } from '../constants';\n\nexport default function Reservations() {\n  const [reservations, setReservations] = useState([]);\n\n  useEffect(() => {\n    fetch(`${BASE_URL}/reservations`, {\n      headers: {\n        Authorization: localStorage.getItem('user'),\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        // TODO catch 401 here\n        console.log(data.data);\n        setReservations(data.data)\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      }); // TODO\n  }, [])\n\n  return (\n    <main style={{ padding: \"1rem 0\" }}>\n      <h2>My Reservations</h2>\n      {reservations && reservations.map(\n        ([startDt, endDt, truckName, truckId]) => (\n          <ReservationItem\n            key={`${truckId}-${startDt}`}\n            startDt={startDt}\n            endDt={endDt}\n            truckName={truckName}\n          />\n        )\n      )}\n      <TrucksButton />\n    </main>\n  );\n}\n\nfunction ReservationItem({ startDt, endDt, truckName }) {\n  return (\n    <div className=\"reservation-item-container\" style={{ padding: \"1rem 0\" }}>\n      <div>{truckName}</div>\n      <div>{new Date(startDt).toLocaleString()}</div>\n      <div>{new Date(endDt).toLocaleString()}</div>\n    </div>\n  );\n}\n\nfunction TrucksButton() {\n  let navigate = useNavigate();\n\n  return (\n    <button onClick={() => navigate(\"/trucks\")}>\n      Find a truck\n    </button>\n  );\n}\n","import React from 'react';\nimport { render } from \"react-dom\";\nimport {\n  BrowserRouter,\n  Routes,\n  Route\n} from \"react-router-dom\";\nimport App from './App';\n// import Login from \"./routes/login\";\nimport Trucks from \"./routes/trucks\";\nimport Reservations from \"./routes/reservations\";\nimport './index.css';\n\n// const rootElement = document.getElementById(\"root\");\n// render(\n//   <BrowserRouter>\n//     <Routes>\n//       <Route path=\"/\" element={<App />} />\n//       <Route path=\"trucks\" element={<Trucks />} />\n//       <Route path=\"reservations\" element={<Reservations />} />\n//     </Routes>\n//   </BrowserRouter>,\n//   rootElement\n// );\n\nimport Amplify from 'aws-amplify';\nAmplify.configure({\n  Auth: {\n    userPoolId: 'us-east-2_OfO9zaVMY', //UserPool ID\n    region: 'us-east-2',\n    userPoolWebClientId: '28427m4ef9sv96kd3gatpdhsmo', //WebClientId\n  }\n});\n\nconst rootElement = document.getElementById(\"root\");\nrender(\n  <BrowserRouter>\n    <Routes>\n      <Route path=\"/\" element={<App />}>\n        <Route path=\"trucks\" element={<Trucks />} />\n        <Route path=\"reservations\" element={<Reservations />} />\n        <Route\n          path=\"*\"\n          element={\n            <main style={{ padding: \"1rem\" }}>\n              <p>nothing here!</p>\n            </main>\n          }\n        />\n      </Route>\n    </Routes>\n  </BrowserRouter>,\n  rootElement\n);\n"],"sourceRoot":""}